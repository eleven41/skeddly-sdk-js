version: 1.0.{build}
environment:
  npm_auth_token:
    secure: lgYqgSI0Bw9ntfScT91VDJE3ZkGUVjr/ahmAAZ19KpnR8KMhpHEXuOM4nkJzXcxF
install:
- ps: >-
    Install-Product node $env:STABLE


    npm install

    Write-Host $env:npm_auth_token

    Set-Content -Value "//registry.npmjs.org/:_authToken=$env:npm_auth_token`n" -Path "$env:userprofile\.npmrc"

    npm whoami
build_script:
- cmd: >-
    npm --no-git-tag-version version %APPVEYOR_BUILD_VERSION%

    npm pack
test_script:
- cmd: >-
    node --version

    npm --version


    npm test
artifacts:
- path: skeddly-sdk-*.tgz
deploy_script:
- cmd: npm publish